# Spatial Memory MCP Server Configuration
# Copy this file to .env and customize as needed.
# All settings have sensible defaults - none are required.

# =============================================================================
# STORAGE
# =============================================================================

# Path to LanceDB storage directory
# Default: ./.spatial-memory (relative to working directory)
# SPATIAL_MEMORY_MEMORY_PATH=~/.spatial-memory

# =============================================================================
# EMBEDDING MODEL
# =============================================================================

# Embedding model to use. Options:
#
# Local models (no API key required, runs on your machine):
#   - all-MiniLM-L6-v2 (default, 384 dims, fast, good quality)
#   - all-mpnet-base-v2 (768 dims, slower, better quality)
#   - Any sentence-transformers model from HuggingFace
#
# OpenAI API (requires SPATIAL_MEMORY_OPENAI_API_KEY):
#   - openai:text-embedding-3-small (1536 dims, fast, cheap)
#   - openai:text-embedding-3-large (3072 dims, best quality)
#   - openai:text-embedding-ada-002 (1536 dims, legacy)
#
# SPATIAL_MEMORY_EMBEDDING_MODEL=all-MiniLM-L6-v2

# Embedding dimensions (auto-detected for known models)
# Only set this if using a custom model
# SPATIAL_MEMORY_EMBEDDING_DIMENSIONS=384

# =============================================================================
# OPENAI (only needed for OpenAI embeddings)
# =============================================================================

# Your OpenAI API key (required only if using openai:* embedding model)
# SPATIAL_MEMORY_OPENAI_API_KEY=sk-...

# OpenAI model for embeddings (used when embedding_model starts with "openai:")
# SPATIAL_MEMORY_OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# =============================================================================
# SERVER
# =============================================================================

# Logging level: DEBUG, INFO, WARNING, ERROR
# SPATIAL_MEMORY_LOG_LEVEL=INFO

# Log format: text or json
# SPATIAL_MEMORY_LOG_FORMAT=text

# =============================================================================
# LIMITS
# =============================================================================

# Maximum steps in journey operation
# SPATIAL_MEMORY_MAX_JOURNEY_STEPS=20

# Maximum steps in wander operation
# SPATIAL_MEMORY_MAX_WANDER_STEPS=20

# Maximum memories to include in visualization
# SPATIAL_MEMORY_MAX_VISUALIZE_MEMORIES=500

# =============================================================================
# AUTO-DECAY SETTINGS
# =============================================================================

# Decay function: exponential (default), linear, or step
# - exponential: Smooth decay following 2^(-t/half_life), best for most use cases
# - linear: Constant rate decay reaching 0 at 2x half_life
# - step: Discrete drops at half_life intervals (1.0 -> 0.5 -> 0.25)
# SPATIAL_MEMORY_AUTO_DECAY_FUNCTION=exponential

# =============================================================================
# VISUALIZATION (UMAP)
# =============================================================================

# UMAP neighborhood size (affects local vs global structure)
# Lower = more local structure, higher = more global structure
# SPATIAL_MEMORY_UMAP_N_NEIGHBORS=15

# UMAP minimum distance between points (0.0 to 1.0)
# Lower = tighter clusters, higher = more spread out
# SPATIAL_MEMORY_UMAP_MIN_DIST=0.1

# =============================================================================
# INDEXING CONFIGURATION
# =============================================================================

# Create vector index when dataset exceeds this size
# SPATIAL_MEMORY_VECTOR_INDEX_THRESHOLD=10000

# Automatically create indexes
# SPATIAL_MEMORY_AUTO_CREATE_INDEXES=true

# Search parameters (higher = better recall, slower)
# SPATIAL_MEMORY_INDEX_NPROBES=20
# SPATIAL_MEMORY_INDEX_REFINE_FACTOR=5

# =============================================================================
# HYBRID SEARCH
# =============================================================================

# Enable full-text search index
# SPATIAL_MEMORY_ENABLE_FTS_INDEX=true

# Default balance between vector (1.0) and keyword (0.0)
# SPATIAL_MEMORY_HYBRID_DEFAULT_ALPHA=0.5

# =============================================================================
# PERFORMANCE
# =============================================================================

# Maximum retry attempts for storage operations
# SPATIAL_MEMORY_MAX_RETRY_ATTEMPTS=3

# Backoff between retries in seconds
# SPATIAL_MEMORY_RETRY_BACKOFF_SECONDS=0.5

# Connection pool size
# SPATIAL_MEMORY_CONNECTION_POOL_MAX_SIZE=10

# =============================================================================
# COGNITIVE OFFLOADING (v2.0)
# =============================================================================

# Enable server-side intelligence + client hook processing
# When enabled: quality gate on remember(), dedup pipeline, queue processor,
# project-scoped memories, and per-project decay are all activated.
# SPATIAL_MEMORY_COGNITIVE_OFFLOADING_ENABLED=false

# Session extraction timer interval in minutes (Layer 2)
# SPATIAL_MEMORY_EXTRACTION_INTERVAL_MINUTES=10

# Signal detection sensitivity (0.0-1.0, lower = capture more)
# SPATIAL_MEMORY_SIGNAL_THRESHOLD=0.3

# Queue processor polling interval in seconds
# SPATIAL_MEMORY_QUEUE_POLL_INTERVAL_SECONDS=30

# Ingest-time vector similarity dedup threshold (reject if above)
# SPATIAL_MEMORY_DEDUP_VECTOR_THRESHOLD=0.85

# Explicit project override (e.g., github.com/org/repo)
# Normally auto-detected from git remote URL. Set this for non-git projects.
# SPATIAL_MEMORY_PROJECT=
